class Runs_tests:
    def __init__(self, data):
        self.data = data
        self.median = sorted(data)[len(data)//2]

        print("median (centered value in the provided list) = ", self.median, '\n')

    # Helper for 5.1.2, 5.1.3, and 5.1.4
    # Builds a list of the runs of consecutive values
    # Appends -1 to the list if the value is > than the next
    # Appends +1 to the list if the value is <= than the next
    # Requires non-binary data

    def alt_sequence1(self):
        ret = []
        for i in range(len(self.data)-1):
            if self.data[i] > self.data[i+1]:
                ret.append(-1)
            else:
                ret.append(1)
        return ret


    # Helper for 5.1.5 and 5.1.6
    # Builds a list of the runs of values compared to the median
    # Appends +1 to the list if the value is >= the median
    # Appends -1 to the list if the value is < than the median

    def alt_sequence2(self):
        ret = []
        for i in range(len(self.data)):
            if self.data[i] < self.median:
                ret.append(-1)
            else:
                ret.append(1)
        return ret


    # 5.1.2 Number of Directional Runs
    # Determines the number of runs in the sequence.
    # A run is when multiple consecutive values are all >= the prior
    # or all < the prior
    # Requires data from alt_sequence1, binary data needs conversion1 first
    # 5.1.5 Number of Runs Based on the Median
    # Determines the number of runs that are constructed with respect
    # to the median of the dataset
    # This is similar to a normal run, but instead of being compared
    # to the previous value, each value is compared to the median
    # Requires data from alt_sequence2

    def num_directional_runs(self, alt_seq):
        # print(alt_seq)
        num_runs = 0
        if len(alt_seq) > 0:
            num_runs += 1
        for i in range(1, len(alt_seq)):
            if alt_seq[i] != alt_seq[i-1]:
                num_runs += 1
        return num_runs


    # 5.1.3 Length of Directional Runs
    # Determines the length of the longest run
    # Requires data from alt_sequence1, binary data needs conversion1 first
    # 5.1.6 Length of Runs Based on the Median
    # Determines the length of the longest run that is constructed
    # with respect to the median
    # Requires data from alt_sequence2

    def len_directional_runs(self, alt_seq):
        max_run = 0
        run = 1
        for i in range(1, len(alt_seq)):
            if alt_seq[i] == alt_seq[i-1]:
                run += 1
            else:
                if run > max_run:
                    max_run = run
                run = 1
        if run > max_run:
            max_run = run
        return max_run

    # 5.1.4 Number of Increases and Decreases
    # Determines the maximum number of increases or decreases between
    # consecutive values
    # Requires data from alt_sequence1, binary data needs conversion1 first

    def num_increases_decreases(self, alt_seq):
        # print(alt_seq)
        positive = 0
        for i in range(len(alt_seq)):
            if alt_seq[i] == 1:
                positive += 1
        reverse_positive = len(alt_seq) - positive
        if positive > reverse_positive:
            return positive
        else:
            return reverse_positive

    def print_outputs(self):
        alt_seq1 = self.alt_sequence1()
        alt_seq2 = self.alt_sequence2()
        print("Number of Directional Runs: ", self.num_directional_runs(alt_seq1))
        print("Length of Directional Runs: ", self.len_directional_runs(alt_seq1))
        print("Number of Increases and Decreases: ", self.num_increases_decreases(alt_seq1))
        print("Number of Runs Based on the Median: ", self.num_directional_runs(alt_seq2))
        print("Length of Runs Based on the Median: ", self.len_directional_runs(alt_seq2))


# Use the functions ====================================================================================================
s = '100010111101000'
seq = '1000000110100011111010100001110001111110111101100101011101001001001100001011110000110101000000000110001011110101000111000101011001110011001001010100100110111000101111000010000110000101000101101100101111111101101000110100100000001001101101101111010001110111010010010110001010101001111001011111101111100101001000011111000011100101100011100001011001100100000110110010001011011101001111010000111111010010010110100100011000000101111000000011001001000001100100010110010110000001101100100100111000110101010011111010111111011111001111001101011101111100101010101111100111010000001010110100110010110011111101001111001010111010001111111011101110000101011111000111000011101100000101000101010110111111010110011111100110110100011111000010000001101001011010100010100111100100101100111011001001100010000111101111101011011101101001001010101111101111111011100110101110110011011101000010000010111010001000100110001101111111101001110111011000110111011101110101011000101010111111011011100100100001000000001110010110010110111011111100001111001111100111000111101100010000110001110111100000101101001101000100101010100101000110000111010110010101000111100011000011100011110100111001100100001110011001100111000111001110111110000000011111100110010110110001110011101001101111100001011110010000100111100110011100010000100100110101001110010100001110101110001011011000011111111011010001000010101100001100000111010011100111000010111100111011011111100111011010000101010010010010110101100100110011111101101101100100001011100111111101010101111001101000000100001001001011011100000011100100011110101001001100100001110101101000110010000001011110110110111101110110100001111101100110000011111000110001001111100101110000110100101111100000101111000111111111101100000101011101101000100101001001001011001001011110000111101111110011100011110011010101111011000000010001111110000011000001010111101011110101100110101100011011001000110101001010100111011100101001100110110000001001001101100101101010100101010011011010110101100100011101001100010001000011100111001011110100101110101100011011100110000100110110000000110000000101101111001011011100111110000111100111011000001111101001010100010101111111011100001110110001101000100001111010011001001110110011101111111001000101010111011011011100100100011101110111111101011100110001111101110111110101110111011101100111110110011011001000010000010111000100110010111110000001111011101100101101001010110000001011110001010001001010111101110000110110100101011011101001100111100100000011110110000001100100001111010100101111010010010100000000010010111111111111110100001010111011000011001111001111111110000101000010101110000001001111000111000001001000001111111111010001001000010101100101000001101101000110111101101000001111001100010110111011011001010010101100001001010000001011011011010100010111001111110111100011100110100001011010011111101010101100100001011111101101101111110011011001100011111110001100010010000101101000101100101111101111000110000101010111000010011110001010100011000111000101111011011101111000111100100000000011010011110101000101001111100010110101101001001111001001001011110011001110101100011000100001110111100101111010010101111000111100001110110010101111010010101001100011101011001110111100111100101011000110001110010010011111111001010000010101110101100101100111110111010110000000000101001101111010100000011110011000011001010111100101100000010000100101010001000100101111110101101101101001000110101111101111111100010101111100110101001100011110110101101000101011000011110000001000001101001110000110010001100011001000101101000101000001110111000011100000000101000101010001001100000100011001110111101000101000010000100010001100100111010101000011011101110010011101110111011111110010000000010101110001001110001011101010100100111100111100010001010110100101100101001101101101000110111010011011011101001010000111100111101110000000001111101100101101111100111111101101001001101001001001011110010011001110100100110011001101101101100100010100101010110101001100111100011011011001000011000101001011110100111010001101'

rnd_seq = [int(bit) for bit in s]
rnd_zeros = rnd_seq.count(0)
rnd_ones = rnd_seq.count(1)
print(f"Random Sequence Balance: 0s= {rnd_zeros}, 1s= {rnd_ones}\n\n")

print('length of the sequence:', len(seq), '\n')
a  = [5, 15, 12, 1, 13, 9, 4]
nist = Runs_tests(seq)
nist.print_outputs()

